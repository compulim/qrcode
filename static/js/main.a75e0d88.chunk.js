(this.webpackJsonpqrcode=this.webpackJsonpqrcode||[]).push([[0],{128:function(e,t,n){},129:function(e,t,n){},132:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r=n(19),a=n.n(r),c=n(121),i=n.n(c),o=(n(128),n(38)),s=n(102),u=n.n(s),l=(n(129),n(42)),d=n.n(l),b=n(123),j=n(66),v=n(104);n(132);function f(e){var t=Object(r.useRef)();return t.current=e,t}var p=n(20),O={height:1080,width:1920},m=function(e){var t=e.className,n=e.deviceId,a=f(e.onQRCode),c=Object(r.useRef)(),i=Object(r.useState)((function(){var e=new Map;return e.set(v.DecodeHintType.POSSIBLE_FORMATS,[v.BarcodeFormat.QR_CODE]),new v.BrowserMultiFormatReader(e)})),s=Object(o.a)(i,1)[0];return Object(r.useEffect)((function(){var e=new AbortController;return s.stopContinuousDecode(),Object(j.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({video:n?Object(b.a)({deviceId:n},O):O});case 2:if(r=t.sent,!e.signal.aborted){t.next=5;break}return t.abrupt("return");case 5:c.current.srcObject=r,c.current.addEventListener("loadedmetadata",(function(t){var n=t.target;e.signal.aborted||n.play()}),{once:!0});case 7:case"end":return t.stop()}}),t)})))(),function(){s.stopContinuousDecode(),e.abort()}}),[n,a,s]),Object(r.useEffect)((function(){var e,t=new AbortController;return s.decodeFromVideoElementContinuously(c.current,(function(e){var n;!t.signal.aborted&&e&&(null===(n=a.current)||void 0===n||n.call(a,{imageSource:c.current,qrCode:null===e||void 0===e?void 0:e.getText()}))})),null===(e=c.current)||void 0===e||e.play(),function(){s.stopContinuousDecode(),t.abort()}}),[a,s,c]),Object(p.jsx)("div",{className:u()("camera",t),children:Object(p.jsx)("video",{className:"camera__video",ref:c})})},h=(n(134),function(e){var t=e.children,n=Object(r.useState)(),a=Object(o.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var e=new AbortController;return Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(n=t.sent,!e.signal.aborted){t.next=5;break}return t.abrupt("return");case 5:if(!(r=n.find((function(e){var t=e.kind,n=e.label;return"videoinput"===t&&!n})))){t.next=12;break}return i(!1),t.next=10,navigator.mediaDevices.getUserMedia({video:{deviceId:r.deviceId}});case 10:if(!e.signal.aborted){t.next=12;break}return t.abrupt("return");case 12:i(!0);case 13:case"end":return t.stop()}}),t)})))(),function(){return e.abort()}}),[i]),"boolean"!==typeof c?Object(p.jsx)("div",{className:"camera-permission-wall camera-permission-wall--checking",children:"Checking camera access\u2026"}):c?t:Object(p.jsx)("div",{className:"camera-permission-wall camera-permission-wall--asking",children:"Please allow camera access to continue."})}),g=function(e){var t=e.className,n=e.onChange,a=e.value,c=f(n),i=Object(r.useState)([]),s=Object(o.a)(i,2),u=s[0],l=s[1],b=Object(r.useCallback)((function(e){var t,n=e.target.value;null===(t=c.current)||void 0===t||t.call(c,n)}),[c]);return Object(r.useEffect)((function(){var e=new AbortController;return Object(j.a)(d.a.mark((function t(){var n,r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(a=t.sent,!e.signal.aborted){t.next=5;break}return t.abrupt("return");case 5:i=a.filter((function(e){return"videoinput"===e.kind})),l(i),null===(n=c.current)||void 0===n||n.call(c,null===(r=i[0])||void 0===r?void 0:r.deviceId);case 8:case"end":return t.stop()}}),t)})))(),function(){return e.abort()}}),[c,l]),Object(p.jsx)("select",{className:t,onChange:b,value:a,children:u.map((function(e){var t=e.deviceId,n=e.label;return Object(p.jsx)("option",{value:t,children:n},t)}))})},x=/^https?:\/\//,C=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),i=Object(o.a)(c,2),s=i[0],l=i[1],d=Object(r.useState)(),b=Object(o.a)(d,2),j=b[0],v=b[1],f=Object(r.useRef)(),O=Object(r.useCallback)((function(){v(!0)}),[v]),C=Object(r.useCallback)((function(e){var t=e.imageSource,n=e.qrCode;if(n){var r,a=t.srcObject.getVideoTracks()[0].getSettings(),c=a.height,i=a.width,o=f.current;if(o)o.setAttribute("height",c),o.setAttribute("width",i),null===(r=o.getContext("2d"))||void 0===r||r.drawImage(t,0,0);l(n)}}),[l]),k=Object(r.useCallback)((function(){l("")}),[l]);return Object(p.jsx)("div",{className:"app",children:Object(p.jsx)(h,{children:j?Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)(m,{className:u()({"app__camera-blur":s}),deviceId:n,onQRCode:C}),Object(p.jsx)("canvas",{className:"app__qr-code-snapshot",hidden:!s,ref:f}),!!s&&Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)("div",{className:"app__qr-code-box",children:Object(p.jsx)("div",{className:"app__qr-code-body",children:x.test(s)?Object(p.jsx)("a",{className:"app__qr-code app__qr-code--link",href:s,rel:"noopener noreferrer",target:"_blank",children:s}):Object(p.jsx)("span",{className:"app__qr-code",children:s})})}),Object(p.jsx)("button",{className:"app__qr-code-close-button",onClick:k,type:"button",children:"\xd7"})]})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)(g,{onChange:a,value:n}),Object(p.jsx)("button",{autoFocus:!0,onClick:O,type:"button",children:"Click here to start"})]})})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root")),k()}},[[135,1,2]]]);
//# sourceMappingURL=main.a75e0d88.chunk.js.map