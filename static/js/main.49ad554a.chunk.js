(this["webpackJsonpqrcode-web"]=this["webpackJsonpqrcode-web"]||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},131:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var r=n(19),a=n.n(r),c=n(121),o=n.n(c),i=(n(127),n(38)),s=n(102),u=n.n(s),l=(n(128),n(42)),d=n.n(l),b=n(66),j=n(104);n(131);function v(e){var t=Object(r.useRef)();return t.current=e,t}var f=n(20),p=function(e){var t=e.className,n=e.deviceId,a=v(e.onQRCode),c=Object(r.useRef)(),o=Object(r.useState)((function(){var e=new Map;return e.set(j.DecodeHintType.POSSIBLE_FORMATS,[j.BarcodeFormat.QR_CODE]),new j.BrowserMultiFormatReader(e)})),s=Object(i.a)(o,1)[0];return Object(r.useEffect)((function(){var e=new AbortController;return s.stopContinuousDecode(),Object(b.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({video:!n||{deviceId:n}});case 2:if(r=t.sent,!e.signal.aborted){t.next=5;break}return t.abrupt("return");case 5:c.current.srcObject=r,c.current.addEventListener("loadedmetadata",(function(t){var n=t.target;e.signal.aborted||n.play()}),{once:!0});case 7:case"end":return t.stop()}}),t)})))(),function(){s.stopContinuousDecode(),e.abort()}}),[n,a,s]),Object(r.useEffect)((function(){var e,t=new AbortController;return s.decodeFromVideoElementContinuously(c.current,(function(e){var n;!t.signal.aborted&&e&&(null===(n=a.current)||void 0===n||n.call(a,{imageSource:c.current,qrCode:null===e||void 0===e?void 0:e.getText()}))})),null===(e=c.current)||void 0===e||e.play(),function(){s.stopContinuousDecode(),t.abort()}}),[a,s,c]),Object(f.jsx)("div",{className:u()("camera",t),children:Object(f.jsx)("video",{className:"camera__video",ref:c})})},O=(n(133),function(e){var t=e.children,n=Object(r.useState)(),a=Object(i.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){var e=new AbortController;return Object(b.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(n=t.sent,!e.signal.aborted){t.next=5;break}return t.abrupt("return");case 5:if(!(r=n.find((function(e){var t=e.kind,n=e.label;return"videoinput"===t&&!n})))){t.next=12;break}return o(!1),t.next=10,navigator.mediaDevices.getUserMedia({video:{deviceId:r.deviceId}});case 10:if(!e.signal.aborted){t.next=12;break}return t.abrupt("return");case 12:o(!0);case 13:case"end":return t.stop()}}),t)})))(),function(){return e.abort()}}),[o]),"boolean"!==typeof c?Object(f.jsx)("div",{className:"camera-permission-wall camera-permission-wall--checking",children:"Checking camera access\u2026"}):c?t:Object(f.jsx)("div",{className:"camera-permission-wall camera-permission-wall--asking",children:"Please allow camera access to continue."})}),m=function(e){var t=e.className,n=e.onChange,a=e.value,c=v(n),o=Object(r.useState)([]),s=Object(i.a)(o,2),u=s[0],l=s[1],j=Object(r.useCallback)((function(e){var t,n=e.target.value;null===(t=c.current)||void 0===t||t.call(c,n)}),[c]);return Object(r.useEffect)((function(){var e=new AbortController;return Object(b.a)(d.a.mark((function t(){var n,r,a,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(a=t.sent,!e.signal.aborted){t.next=5;break}return t.abrupt("return");case 5:o=a.filter((function(e){return"videoinput"===e.kind})),l(o),null===(n=c.current)||void 0===n||n.call(c,null===(r=o[0])||void 0===r?void 0:r.deviceId);case 8:case"end":return t.stop()}}),t)})))(),function(){return e.abort()}}),[c,l]),Object(f.jsx)("select",{className:t,onChange:j,value:a,children:u.map((function(e){var t=e.deviceId,n=e.label;return Object(f.jsx)("option",{value:t,children:n},t)}))})},h=/^https?:\/\//,g=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),o=Object(i.a)(c,2),s=o[0],l=o[1],d=Object(r.useState)(),b=Object(i.a)(d,2),j=b[0],v=b[1],g=Object(r.useRef)(),x=Object(r.useCallback)((function(){v(!0)}),[v]),C=Object(r.useCallback)((function(e){var t=e.imageSource,n=e.qrCode;if(n){var r,a=t.srcObject.getVideoTracks()[0].getSettings(),c=a.height,o=a.width,i=g.current;if(i)i.setAttribute("height",c),i.setAttribute("width",o),null===(r=i.getContext("2d"))||void 0===r||r.drawImage(t,0,0);l(n)}}),[l]),k=Object(r.useCallback)((function(){l("")}),[l]);return Object(f.jsx)("div",{className:"app",children:Object(f.jsx)(O,{children:j?Object(f.jsxs)(r.Fragment,{children:[Object(f.jsx)(p,{className:u()({"app__camera-blur":s}),deviceId:n,onQRCode:C}),Object(f.jsx)("canvas",{className:"app__qr-code-snapshot",hidden:!s,ref:g}),!!s&&Object(f.jsxs)(r.Fragment,{children:[Object(f.jsx)("div",{className:"app__qr-code-box",children:Object(f.jsx)("div",{className:"app__qr-code-body",children:h.test(s)?Object(f.jsx)("a",{className:"app__qr-code app__qr-code--link",href:s,rel:"noopener noreferrer",target:"_blank",children:s}):Object(f.jsx)("span",{className:"app__qr-code",children:s})})}),Object(f.jsx)("button",{className:"app__qr-code-close-button",onClick:k,type:"button",children:"\xd7"})]})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{onChange:a,value:n}),Object(f.jsx)("button",{autoFocus:!0,onClick:x,type:"button",children:"Click here to start"})]})})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),x()}},[[134,1,2]]]);
//# sourceMappingURL=main.49ad554a.chunk.js.map